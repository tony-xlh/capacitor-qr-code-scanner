{"version":3,"sources":["../../../src/web.ts"],"names":[],"mappings":"+OAIA,IAAI,mBAAqB,wEAEzB,IAAa,EAAb,YAAE,qBAAF,iBAAE,SAAF,IAAI,IAAJ,EAAI,4B,2BAEM,YAAsB,EAFhC,EAAE,uBAAE,IAAJ,cAAI,MAAJ,WAAM,IAAN,wBAGE,WAAkB,GAAlB,0EAEQ,EAAO,GACT,KAAK,QAAQ,cAEb,KAAK,QAAQ,eALnB,qDAQU,IAAI,MAAM,qBARpB,wDAHI,gBAAN,GAAQ,OAAR,8BAAI,IAAJ,WAAI,MAAJ,WAAM,IAAN,wBAeE,uGAEU,KAAK,QAAQ,OAFvB,yHAfI,kBAAE,OAAR,8BAAI,IAAJ,UAAI,MAAJ,WAAM,IAAN,wBAuBE,mJAvBI,kBAAE,OAAR,8BAAI,IAAJ,YAAI,MAAJ,WAAM,IAAN,wBA2BE,WAAgB,GAAhB,+EACM,eAAgB,QACM,GAApB,EAAQ,aACV,KAAK,WAAW,EAAQ,iBAGP,IAAjB,KAAK,QANX,wBAOQ,EAAQ,gBACV,IAAI,eAAe,eAAiB,EAAQ,eAC5C,QAAQ,IAAI,wBACJ,EAAQ,UAChB,IAAI,eAAe,YAAc,EAAQ,SAX/C,SAayB,IAAI,eAAe,iBAb5C,OAaI,KAAK,QAbT,OAcI,KAAK,QAAQ,YAAc,YACzB,GAAI,EAAQ,OAAO,EAAE,CACI,GAAnB,EAAK,aACP,EAAK,QAAQ,QACb,EAAK,QAAQ,QAGf,IADA,IAAI,EAAc,GACT,EAAQ,EAAG,EAAQ,EAAQ,OAAQ,IAAS,CACnD,IACI,EADA,EAAoB,EAAQ,GAEhC,EAAa,CAAC,YAAY,EAAO,YAAY,cAAc,EAAO,oBAAoB,mBAAmB,EAAK,oBAAoB,EAAO,eACzI,EAAY,KAAK,GAEnB,IAAI,EAAM,CAAC,QAAU,GACrB,EAAK,gBAAgB,cAAe,KAGxC,KAAK,QAAQ,UAAU,uBAAuB,wBAAwB,GAAG,SA/B7E,wBAiCI,QAAQ,IAAI,gCAjChB,YAmCM,EAAQ,SAnCd,kCAoCU,KAAK,QAAQ,8BAA8B,EAAQ,UApC7D,QAqCI,QAAQ,IAAI,kBArChB,+BAuCI,QAAQ,IAAI,kBAvChB,UAwCU,KAAK,QAAQ,uBAxCvB,yBA0CQ,KAAK,QAAQ,OA1CrB,iDA3BI,gBAAN,GAAQ,OAAR,8BAAI,IAAJ,sBAAI,MAwEM,SAAqB,GAI3B,IAHA,IAAI,EAAS,GACT,EAAQ,IAAI,WAAY,GACxB,EAAM,EAAM,WACP,EAAI,EAAG,EAAI,EAAK,IACvB,GAAU,OAAO,aAAc,EAAO,IAExC,OAAO,OAAO,KAAM,OA/ExB,GAA4B","file":"static/js/5.0ab885d0.chunk.js","sourcesContent":["import { WebPlugin } from '@capacitor/core';\r\nimport DBR from \"dynamsoft-javascript-barcode\";\r\nDBR.engineResourcePath = \"https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@8.6.3/dist/\";\r\nexport class DBRWeb extends WebPlugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.continuous = false;\r\n    }\r\n    async toggleTorch(options) {\r\n        try {\r\n            if (options[\"on\"]) {\r\n                this.scanner.turnOnTorch();\r\n            }\r\n            else {\r\n                this.scanner.turnOffTorch();\r\n            }\r\n        }\r\n        catch (e) {\r\n            throw new Error(\"Torch unsupported\");\r\n        }\r\n    }\r\n    async stopScan() {\r\n        try {\r\n            await this.scanner.hide();\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n    async destroy() {\r\n        return;\r\n    }\r\n    async startScan(options) {\r\n        if (\"continuous\" in options) {\r\n            if (options.continuous != undefined) {\r\n                this.continuous = options.continuous;\r\n            }\r\n        }\r\n        if (this.scanner === undefined) {\r\n            if (options.organizationID) {\r\n                DBR.BarcodeScanner.organizationID = options.organizationID;\r\n                console.log(\"set organization ID\");\r\n            }\r\n            else if (options.license) {\r\n                DBR.BarcodeScanner.productKeys = options.license;\r\n            }\r\n            this.scanner = await DBR.BarcodeScanner.createInstance();\r\n            this.scanner.onFrameRead = results => {\r\n                if (results.length > 0) {\r\n                    if (this.continuous == false) {\r\n                        this.scanner.close();\r\n                        this.scanner.hide();\r\n                    }\r\n                    var scanResults = [];\r\n                    for (let index = 0; index < results.length; index++) {\r\n                        let result = results[index];\r\n                        var scanResult;\r\n                        scanResult = { barcodeText: result.barcodeText, barcodeFormat: result.barcodeFormatString, barcodeBytesBase64: this.arrayBufferToBase64(result.barcodeBytes) };\r\n                        scanResults.push(scanResult);\r\n                    }\r\n                    var ret = { \"results\": scanResults };\r\n                    this.notifyListeners(\"onFrameRead\", ret);\r\n                }\r\n            };\r\n            this.scanner.UIElement.getElementsByClassName(\"dbrScanner-btn-close\")[0].remove();\r\n        }\r\n        else {\r\n            console.log(\"Scanner already initialized.\");\r\n        }\r\n        if (options.template) {\r\n            await this.scanner.initRuntimeSettingsWithString(options.template);\r\n            console.log(\"Using template\");\r\n        }\r\n        else {\r\n            console.log(\"Reset settings\");\r\n            await this.scanner.resetRuntimeSettings();\r\n        }\r\n        await this.scanner.show();\r\n    }\r\n    arrayBufferToBase64(buffer) {\r\n        var binary = '';\r\n        var bytes = new Uint8Array(buffer);\r\n        var len = bytes.byteLength;\r\n        for (var i = 0; i < len; i++) {\r\n            binary += String.fromCharCode(bytes[i]);\r\n        }\r\n        return window.btoa(binary);\r\n    }\r\n}\r\n//# sourceMappingURL=web.js.map"],"sourceRoot":""}